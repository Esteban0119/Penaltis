<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Predicción de Penaltis</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js"></script>

<style>
body {
    background-color: #0d1117;
    color: #e6edf3;
    font-family: Arial;
    text-align: center;
    margin: 40px;
}

input, select {
    padding: 10px;
    margin: 10px;
    width: 250px;
    border-radius: 8px;
    border: 1px solid #30363d;
    background: #161b22;
    color: white;
}

button {
    padding: 12px 20px;
    background: #238636;
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    margin-top: 15px;
}
button:hover {
    background: #2ea043;
}

.container {
    max-width: 500px;
    margin: auto;
}
</style>
</head>

<body>
<h1>Predicción de Gol en Penaltis</h1>

<div class="container">
    
    <label>Velocidad (km/h) — Rango 60 a 140</label><br>
    <input id="velocidad" type="number" min="60" max="140">

    <label>Ángulo (grados) — Rango 0 a 60</label><br>
    <input id="angulo" type="number" min="0" max="60">

    <label>Distancia al portero (m) — Rango 0.3 a 1.5</label><br>
    <input id="distancia" type="number" step="0.01" min="0.3" max="1.5">

    <label>Presión del partido</label><br>
    <select id="presion">
        <option>Baja</option>
        <option>Media</option>
        <option>Alta</option>
    </select>

    <label>Pie dominante</label><br>
    <select id="pie">
        <option>Derecho</option>
        <option>Izquierdo</option>
    </select>

    <button onclick="predecirPenalti()">Predecir Penalti.</button>
</div>

<script>
let model;

async function cargarModelo() {
    try {
        model = await tf.loadLayersModel("model.json");
        console.log("Modelo cargado correctamente");
    } catch (error) {
        console.error("Error al cargar modelo:", error);
        alert("No se pudo cargar el modelo. Revisa la ruta.");
    }
}

cargarModelo();

function predecirPenalti() {
    alert("entre a la funcion");
    if (!model) {
        alert("El modelo aún no se ha cargado");
        return;
    }

    const velocidad = parseFloat(document.getElementById("velocidad").value);
    const angulo = parseFloat(document.getElementById("angulo").value);
    const distancia = parseFloat(document.getElementById("distancia").value);
    const presion = document.getElementById("presion").value;
    const pie = document.getElementById("pie").value;

    // Mapear variables categóricas
    const presionMap = { "Baja": 0, "Media": 1, "Alta": 2 };
    const pieMap = { "Derecho": 0, "Izquierdo": 1 };

    // Crear tensor de entrada
    const input = tf.tensor2d([[
        velocidad,
        angulo,
        distancia,
        presionMap[presion],
        pieMap[pie]
    ]]);

    // Predicción
    model.predict(input).array().then(pred => {
        const prob = pred[0][0];

        if (prob >= 0.5) {
            alert("⚽ Resultado: ¡Gol!");
        } else {
            alert("❌ Resultado: Fallado");
        }
    });
}
</script>

</body>
</html>

</body>
</html>

